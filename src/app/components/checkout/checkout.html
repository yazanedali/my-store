<div class="checkout-container">
  <h1>Checkout</h1>

  <div *ngIf="cartItems.length === 0" class="empty-cart">
    <p>Your cart is empty</p>
    <a routerLink="/products" class="btn btn-primary">Continue Shopping</a>
  </div>

  <div *ngIf="cartItems.length > 0" class="checkout-content">
    <div class="checkout-form">
      <!-- Customer Information -->
      <section class="form-section">
        <h2>Customer Information</h2>
        
        <div class="form-group">
          <label for="fullName">Full Name *</label>
          <input 
            type="text" 
            id="fullName" 
            [(ngModel)]="customerInfo.fullName" 
            (ngModelChange)="validateFullName()"
            name="fullName"
            class="form-control"
            [class.error]="formErrors.fullName">
          <div class="error-message" *ngIf="formErrors.fullName">{{ formErrors.fullName }}</div>
        </div>

        <div class="form-group">
          <label for="email">Email *</label>
          <input 
            type="email" 
            id="email" 
            [(ngModel)]="customerInfo.email" 
            (ngModelChange)="validateEmail()"
            name="email"
            class="form-control"
            [class.error]="formErrors.email">
          <div class="error-message" *ngIf="formErrors.email">{{ formErrors.email }}</div>
        </div>

        <div class="form-group">
          <label for="address">Address *</label>
          <input 
            type="text" 
            id="address" 
            [(ngModel)]="customerInfo.address" 
            (ngModelChange)="validateAddress()"
            name="address"
            class="form-control"
            [class.error]="formErrors.address">
          <div class="error-message" *ngIf="formErrors.address">{{ formErrors.address }}</div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="city">City *</label>
            <input 
              type="text" 
              id="city" 
              [(ngModel)]="customerInfo.city" 
              (ngModelChange)="validateCity()"
              name="city"
              class="form-control"
              [class.error]="formErrors.city">
            <div class="error-message" *ngIf="formErrors.city">{{ formErrors.city }}</div>
          </div>

          <div class="form-group">
            <label for="state">State *</label>
            <input 
              type="text" 
              id="state" 
              [(ngModel)]="customerInfo.state" 
              (ngModelChange)="validateState()"
              name="state"
              class="form-control"
              [class.error]="formErrors.state">
            <div class="error-message" *ngIf="formErrors.state">{{ formErrors.state }}</div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="zipCode">ZIP Code *</label>
            <input 
              type="text" 
              id="zipCode" 
              [(ngModel)]="customerInfo.zipCode" 
              (ngModelChange)="validateZipCode()"
              name="zipCode"
              class="form-control"
              [class.error]="formErrors.zipCode">
            <div class="error-message" *ngIf="formErrors.zipCode">{{ formErrors.zipCode }}</div>
          </div>

          <div class="form-group">
            <label for="country">Country *</label>
            <input 
              type="text" 
              id="country" 
              [(ngModel)]="customerInfo.country" 
              (ngModelChange)="validateCountry()"
              name="country"
              class="form-control"
              [class.error]="formErrors.country">
            <div class="error-message" *ngIf="formErrors.country">{{ formErrors.country }}</div>
          </div>
        </div>
      </section>

      <!-- Payment Method -->
      <section class="form-section">
        <h2>Payment Method</h2>
        
        <div class="payment-methods">
          <label class="payment-option">
            <input 
              type="radio" 
              name="paymentMethod" 
              value="credit" 
              [(ngModel)]="customerInfo.paymentMethod"
              (ngModelChange)="validatePaymentMethod()">
            Credit Card
          </label>
          
          <label class="payment-option">
            <input 
              type="radio" 
              name="paymentMethod" 
              value="paypal" 
              [(ngModel)]="customerInfo.paymentMethod"
              (ngModelChange)="validatePaymentMethod()">
            PayPal
          </label>
        </div>

        <!-- Credit Card Details -->
        <div *ngIf="customerInfo.paymentMethod === 'credit'" class="credit-card-details">
          <div class="form-group">
            <label for="cardNumber">Card Number *</label>
            <input 
              type="text" 
              id="cardNumber" 
              [(ngModel)]="customerInfo.cardNumber" 
              (ngModelChange)="validateCardNumber()"
              name="cardNumber"
              placeholder="1234 5678 9012 3456"
              class="form-control"
              [class.error]="formErrors.cardNumber">
            <div class="error-message" *ngIf="formErrors.cardNumber">{{ formErrors.cardNumber }}</div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="expiryDate">Expiry Date *</label>
              <input 
                type="text" 
                id="expiryDate" 
                [(ngModel)]="customerInfo.expiryDate" 
                (ngModelChange)="validateExpiryDate()"
                name="expiryDate"
                placeholder="MM/YY"
                class="form-control"
                [class.error]="formErrors.expiryDate">
              <div class="error-message" *ngIf="formErrors.expiryDate">{{ formErrors.expiryDate }}</div>
            </div>

            <div class="form-group">
              <label for="cvv">CVV *</label>
              <input 
                type="text" 
                id="cvv" 
                [(ngModel)]="customerInfo.cvv" 
                (ngModelChange)="validateCVV()"
                name="cvv"
                placeholder="123"
                class="form-control"
                [class.error]="formErrors.cvv">
              <div class="error-message" *ngIf="formErrors.cvv">{{ formErrors.cvv }}</div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Order Summary -->
    <app-order-summary
      [items]="cartItems"
      [subtotal]="totalPrice"
      [tax]="tax"
      [total]="grandTotal"
      [submitButtonText]="'Place Order'"
      [canSubmit]="canSubmitOrder"
      (submitOrder)="submitOrder()">
      
      <a routerLink="/cart" class="back-to-cart">‚Üê Back to Cart</a>
    </app-order-summary>
  </div>
</div>